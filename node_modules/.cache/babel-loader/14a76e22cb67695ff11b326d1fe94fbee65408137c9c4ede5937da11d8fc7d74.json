{"ast":null,"code":"import { useStore } from \"vuex\";\nimport { computed } from \"vue\";\nexport const useCommonCartEffect = shopId => {\n  const store = useStore();\n  const cartList = store.state.cartList;\n  const changeCartItemInfo = (shopId, productId, productInfo, num) => {\n    // console.log(shopId,productId,productInfo,num)\n    store.commit('changeCartItemInfo', {\n      shopId,\n      productId,\n      productInfo,\n      num\n    });\n  };\n  const productList = computed(() => {\n    const productList = cartList[shopId]?.productList || {};\n    const notEmptyProductList = {};\n    for (let i in productList) {\n      const product = productList[i];\n      if (product.count > 0) {\n        notEmptyProductList[i] = product;\n      }\n    }\n    return notEmptyProductList;\n  });\n  const shopName = computed(() => {\n    const shopName = cartList[shopId]?.shopName || '';\n    return shopName;\n  });\n  const calculations = computed(() => {\n    const productList = cartList[shopId]?.productList;\n    const result = {\n      total: 0,\n      price: 0,\n      allChecked: true\n    };\n    if (productList) {\n      for (let i in productList) {\n        const product = productList[i];\n        result.total += product.count;\n        if (product.check) {\n          result.price += product.count * product.price;\n        }\n        if (product.count > 0 && !product.check) {\n          result.allChecked = false;\n        }\n      }\n    }\n    result.price = result.price.toFixed(2);\n    return result;\n  });\n  return {\n    changeCartItemInfo,\n    cartList,\n    productList,\n    shopName,\n    calculations\n  };\n};","map":{"version":3,"names":["useStore","computed","useCommonCartEffect","shopId","store","cartList","state","changeCartItemInfo","productId","productInfo","num","commit","productList","notEmptyProductList","i","product","count","shopName","calculations","result","total","price","allChecked","check","toFixed"],"sources":["D:/VsSpace/vue/jingdong/src/effects/commonCartEffect.js"],"sourcesContent":["import { useStore } from \"vuex\"\r\nimport { computed } from \"vue\";\r\n\r\nexport const useCommonCartEffect = (shopId) => {\r\n    const store = useStore();\r\n    const cartList = store.state.cartList;\r\n    const changeCartItemInfo = (shopId, productId, productInfo, num) => {\r\n        // console.log(shopId,productId,productInfo,num)\r\n        store.commit('changeCartItemInfo', { \r\n            shopId, productId, productInfo, num \r\n        });\r\n    };\r\n    const productList = computed(()=>{\r\n        const productList = cartList[shopId]?.productList || {}\r\n        const notEmptyProductList = {}\r\n        for(let i in productList){\r\n            const product = productList[i]\r\n            if(product.count>0){\r\n            notEmptyProductList[i]=product\r\n            }\r\n        }\r\n        return notEmptyProductList\r\n    });\r\n    const shopName = computed(()=>{\r\n        const shopName = cartList[shopId]?.shopName || '';\r\n        return shopName\r\n    });\r\n\r\n    const calculations = computed(()=>{\r\n        const productList = cartList[shopId]?.productList;\r\n        const result = {total:0,price:0,allChecked:true}\r\n        if(productList){\r\n            for(let i in productList){\r\n                const product = productList[i];\r\n                result.total += product.count;\r\n                if(product.check){\r\n                    result.price += (product.count*product.price);\r\n                }\r\n                if(product.count >0 && !product.check){\r\n                    result.allChecked=false;\r\n                }\r\n            }\r\n        }\r\n        result.price=result.price.toFixed(2);\r\n        return result\r\n    });\r\n    \r\n    return { changeCartItemInfo,cartList,productList,shopName,calculations}\r\n}\r\n"],"mappings":"AAAA,SAASA,QAAQ,QAAQ,MAAM;AAC/B,SAASC,QAAQ,QAAQ,KAAK;AAE9B,OAAO,MAAMC,mBAAmB,GAAIC,MAAM,IAAK;EAC3C,MAAMC,KAAK,GAAGJ,QAAQ,CAAC,CAAC;EACxB,MAAMK,QAAQ,GAAGD,KAAK,CAACE,KAAK,CAACD,QAAQ;EACrC,MAAME,kBAAkB,GAAGA,CAACJ,MAAM,EAAEK,SAAS,EAAEC,WAAW,EAAEC,GAAG,KAAK;IAChE;IACAN,KAAK,CAACO,MAAM,CAAC,oBAAoB,EAAE;MAC/BR,MAAM;MAAEK,SAAS;MAAEC,WAAW;MAAEC;IACpC,CAAC,CAAC;EACN,CAAC;EACD,MAAME,WAAW,GAAGX,QAAQ,CAAC,MAAI;IAC7B,MAAMW,WAAW,GAAGP,QAAQ,CAACF,MAAM,CAAC,EAAES,WAAW,IAAI,CAAC,CAAC;IACvD,MAAMC,mBAAmB,GAAG,CAAC,CAAC;IAC9B,KAAI,IAAIC,CAAC,IAAIF,WAAW,EAAC;MACrB,MAAMG,OAAO,GAAGH,WAAW,CAACE,CAAC,CAAC;MAC9B,IAAGC,OAAO,CAACC,KAAK,GAAC,CAAC,EAAC;QACnBH,mBAAmB,CAACC,CAAC,CAAC,GAACC,OAAO;MAC9B;IACJ;IACA,OAAOF,mBAAmB;EAC9B,CAAC,CAAC;EACF,MAAMI,QAAQ,GAAGhB,QAAQ,CAAC,MAAI;IAC1B,MAAMgB,QAAQ,GAAGZ,QAAQ,CAACF,MAAM,CAAC,EAAEc,QAAQ,IAAI,EAAE;IACjD,OAAOA,QAAQ;EACnB,CAAC,CAAC;EAEF,MAAMC,YAAY,GAAGjB,QAAQ,CAAC,MAAI;IAC9B,MAAMW,WAAW,GAAGP,QAAQ,CAACF,MAAM,CAAC,EAAES,WAAW;IACjD,MAAMO,MAAM,GAAG;MAACC,KAAK,EAAC,CAAC;MAACC,KAAK,EAAC,CAAC;MAACC,UAAU,EAAC;IAAI,CAAC;IAChD,IAAGV,WAAW,EAAC;MACX,KAAI,IAAIE,CAAC,IAAIF,WAAW,EAAC;QACrB,MAAMG,OAAO,GAAGH,WAAW,CAACE,CAAC,CAAC;QAC9BK,MAAM,CAACC,KAAK,IAAIL,OAAO,CAACC,KAAK;QAC7B,IAAGD,OAAO,CAACQ,KAAK,EAAC;UACbJ,MAAM,CAACE,KAAK,IAAKN,OAAO,CAACC,KAAK,GAACD,OAAO,CAACM,KAAM;QACjD;QACA,IAAGN,OAAO,CAACC,KAAK,GAAE,CAAC,IAAI,CAACD,OAAO,CAACQ,KAAK,EAAC;UAClCJ,MAAM,CAACG,UAAU,GAAC,KAAK;QAC3B;MACJ;IACJ;IACAH,MAAM,CAACE,KAAK,GAACF,MAAM,CAACE,KAAK,CAACG,OAAO,CAAC,CAAC,CAAC;IACpC,OAAOL,MAAM;EACjB,CAAC,CAAC;EAEF,OAAO;IAAEZ,kBAAkB;IAACF,QAAQ;IAACO,WAAW;IAACK,QAAQ;IAACC;EAAY,CAAC;AAC3E,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}